<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CLT Flight Display</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: black;
  color: white;
  font-family: system-ui, -apple-system, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  overflow: hidden;
}

.card {
  text-align: center;
  animation: fadeIn 0.8s ease;
}

.logo {
  width: 90px;
  height: 90px;
  margin: 0 auto 20px;
  animation: pop 0.6s ease;
}

.city {
  font-size: 20px;
  font-weight: 600;
}

.route {
  opacity: 0.6;
  margin-top: 6px;
}

.flight {
  margin-top: 24px;
  font-size: 40px;
}

.status {
  margin-top: 8px;
  font-size: 14px;
  color: #4fd1ff;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pop {
  from { transform: scale(0.7); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

  .map {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 180px;
  background: radial-gradient(circle at center, #111 0%, #000 70%);
  overflow: hidden;
  opacity: 0.9;
}

.route-line {
  position: absolute;
  top: 50%;
  left: 10%;
  width: 80%;
  height: 1px;
  background: linear-gradient(
    to right,
    transparent,
    rgba(255,255,255,0.4),
    transparent
  );
}

.plane {
  position: absolute;
  top: 50%;
  font-size: 22px;
  transform: translate(-50%, -50%);
  animation: fly 12s linear infinite;
  opacity: 0.9;
}

@keyframes fly {
  from { left: 10%; }
  to   { left: 90%; }
}

@keyframes flyReverse {
  from { left: 90%; }
  to   { left: 10%; }
}

</style>
</head>

<body>

<div class="card" id="card">
  <img id="logo" class="logo" />
  <div class="flight" id="flight">Loading…</div>
  <div class="route" id="route"></div>
  <div class="city" id="city"></div>
  <div class="status" id="status"></div>
</div>

<script>
const API_KEY = "e381429a76ea7eac1fb838b22e66e3c4";
let flights = [];
let index = 0;

async function fetchFlights() {
  const url = `https://api.aviationstack.com/v1/flights?access_key=${API_KEY}&arr_iata=CLT&flight_status=active&limit=10`;
  const res = await fetch(url);
  const data = await res.json();
  flights = data.data || [];
}

function showFlight() {
  if (flights.length === 0) return;

  const f = flights[index % flights.length];
  index++;

  const card = document.getElementById("card");
  card.style.animation = "none";
  card.offsetHeight;
  card.style.animation = null;

  // BIG flight number
  document.getElementById("flight").textContent =
    f.flight.iata || "—";

  // Route text
  document.getElementById("city").textContent =
    `${f.departure.airport} → ${f.arrival.airport}`;

  document.getElementById("status").textContent =
    `Status: ${f.flight_status.toUpperCase()}`;

  // Airline logo
  const logo = document.getElementById("logo");
  if (f.airline.iata) {
    logo.src = `https://content.airhex.com/content/logos/airlines_${f.airline.iata}_200_200_s.png`;
    logo.style.display = "block";
  } else {
    logo.style.display = "none";
  }

  // Animate plane direction (arrival vs departure)
  const plane = document.querySelector(".plane");
  plane.style.animation = "none";
  plane.offsetHeight;

  if (f.arrival.iata === "CLT") {
    plane.style.transform = "translate(-50%, -50%) rotate(0deg)";
    plane.style.animation = "fly 12s linear infinite";
  } else {
    plane.style.transform = "translate(-50%, -50%) rotate(180deg)";
    plane.style.animation = "flyReverse 12s linear infinite";
  }
}

fetchFlights();
setInterval(fetchFlights, 10 * 60 * 1000); // API refresh
setInterval(showFlight, 8 * 1000);         // rotate display
</script>

<div class="map">
  <div class="route-line"></div>
  <div class="plane">✈︎</div>
</div>
  
</body>
</html>




