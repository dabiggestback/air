<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CLT Flight Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: black;
  color: white;
  font-family: system-ui, -apple-system, sans-serif;
  height: 100vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.card {
  text-align: center;
  padding-top: 40px;
}

.logo {
  width: 90px;
  height: 90px;
  margin-bottom: 20px;
  animation: pop 0.6s ease;
}

.flight {
  font-size: 54px;
  font-weight: 600;
  letter-spacing: 2px;
}

.route {
  margin-top: 10px;
  font-size: 20px;
  opacity: 0.7;
}

.status {
  margin-top: 8px;
  font-size: 14px;
  color: #4fd1ff;
}

.map {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 220px;
  background: radial-gradient(circle at center, #111 0%, #000 70%);
}

.map-svg {
  width: 100%;
  height: 100%;
}

#routePath {
  stroke-dasharray: 6 10;
  animation: dash 4s linear infinite;
}

#planeIcon {
  dominant-baseline: middle;
  text-anchor: middle;
  animation: movePlane 12s linear infinite;
}

@keyframes dash {
  to { stroke-dashoffset: -32; }
}

@keyframes movePlane {
  from { offset-distance: 0%; }
  to   { offset-distance: 100%; }
}

@keyframes pop {
  from { transform: scale(0.8); opacity: 0; }
  to   { transform: scale(1); opacity: 1; }
}
</style>
</head>

<body>

<div class="card">
  <img id="logo" class="logo" />
  <div class="flight" id="flight">—</div>
  <div class="route" id="route"></div>
  <div class="status" id="status"></div>
</div>

<div class="map">
  <svg class="map-svg" viewBox="0 0 1000 300">
    <path id="routePath"
          d="M100 200 Q500 50 900 200"
          fill="none"
          stroke="rgba(255,255,255,0.35)"
          stroke-width="2"
          style="offset-path: path('M100 200 Q500 50 900 200');"/>
    <text id="planeIcon" font-size="22">✈︎</text>
  </svg>
</div>

<script>
const API_KEY = "e381429a76ea7eac1fb838b22e66e3c4";
let flights = [];
let index = 0;

async function fetchFlights() {
  const url =
    `https://api.aviationstack.com/v1/flights?access_key=${API_KEY}` +
    `&arr_iata=CLT&flight_status=active&limit=10`;

  const res = await fetch(url);
  const data = await res.json();
  flights = data.data || [];
}

function showFlight() {
  if (flights.length === 0) return;

  const f = flights[index % flights.length];
  index++;

  document.getElementById("flight").textContent =
    f.flight.iata || "—";

  document.getElementById("route").textContent =
    `${f.departure.airport} → ${f.arrival.airport}`;

  document.getElementById("status").textContent =
    `Status: ${f.flight_status.toUpperCase()}`;

  const logo = document.getElementById("logo");
  if (f.airline.iata) {
    logo.src =
      `https://content.airhex.com/content/logos/airlines_${f.airline.iata}_200_200_s.png`;
    logo.style.display = "block";
  } else {
    logo.style.display = "none";
  }

  updateTrackerDirection(f.arrival.iata === "CLT");
}

function updateTrackerDirection(isArrival) {
  const path = document.getElementById("routePath");
  const plane = document.getElementById("planeIcon");

  plane.style.animation = "none";
  plane.offsetHeight;

  if (isArrival) {
    path.setAttribute("d", "M100 200 Q500 50 900 200");
    plane.style.transform = "rotate(0deg)";
  } else {
    path.setAttribute("d", "M900 200 Q500 50 100 200");
    plane.style.transform = "rotate(180deg)";
  }

  path.style.offsetPath = `path('${path.getAttribute("d")}')`;
  plane.style.animation = "movePlane 12s linear infinite";
}

fetchFlights();
setInterval(fetchFlights, 10 * 60 * 1000);
setInterval(showFlight, 8 * 1000);
</script>

</body>
</html>





